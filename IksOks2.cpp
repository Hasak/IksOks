#include<iostream>
#include<windows.h>
#include<conio.h>
#include<iomanip>
#include<string>
#include<stdlib.h>
#include<time.h>
using namespace std;
int main()
{
    int b,c,i,n,m,x,y,z,rd,odab;
    char sm=2;
    string a;
    string igrac1,igrac2;
    srand (time(NULL));
    while(1>0)
    {
        system("cls");
        cout<<endl;
        cout<<"               ___          ___              ___          ___          ___"<<endl;
        cout<<"    ___       /\\__\\        /\\  \\            /\\  \\        /\\__\\        /\\  \\"<<endl;
        cout<<"   /\\  \\     /:/  /       /::\\  \\          /::\\  \\      /:/  /       /::\\  \\"<<endl;
        cout<<"   \\:\\  \\   /:/__/       /:/\\:\\  \\        /:/\\:\\  \\    /:/__/       /:/\\:\\  \\"<<endl;
        cout<<"   /::\\__\\ /::\\__\\____  _\\:\\-\\:\\  \\      /:/  \\:\\  \\  /::\\__\\____  _\\:\\-\\:\\  \\"<<endl;
        cout<<"__/:/\\/__//:/\\:::::\\__\\/\\ \\:\\ \\:\\__\\    /:/__/ \\:\\__\\/:/\\:::::\\__\\/\\ \\:\\ \\:\\  \\"<<endl;
        cout<<"\\/:/  /   \\/_|:|--|-   \\:\\ \\:\\ \\/__/    \\:\\  \\ /:/  /\\/_|:|--|-   \\:\\ \\:\\ \\/__/"<<endl;
        cout<<"::/__/       |:|  |     \\:\\ \\:\\__\\       \\:\\  /:/  /    |:|  |     \\:\\ \\:\\__\\"<<endl;
        cout<<"\\:\\__\\       |:|  |      \\:\\/:/  /        \\:\\/:/  /     |:|  |      \\:\\/:/  /"<<endl;
        cout<<" \\/__/       |:|  |       \\::/  /          \\::/  /      |:|  |       \\::/  /"<<endl;
        cout<<"              \\|__|        \\/__/            \\/__/        \\|__|        \\/__/"<<endl;
        cout<<""<<endl;
        cout<<"1. Protiv C++"<<endl;
        cout<<"2. Protiv igraca"<<endl;
        cout<<"3. Zatvori"<<endl;
        i=getch();
        if(i=='1')
        {
            x=0,y=0;
            system("cls");
            cout<<"\n Ime igraca: ";cin>>igrac1;n=igrac1.length();
            if(igrac1[0]>90)
                igrac1[0]-=32;
            while(1>0)
            {
                a="         ";
                b=0;c=0;
                while(c<9)
                {
                    system("cls");
                    cout<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |"<<endl;
                    cout<<"    "<<a[0]<<"   |   "<<a[1]<<"   |   "<<a[2]<<"       "<<x<<" - "<<y<<"       "<<"1"<<"   |   "<<"2"<<"   |   "<<"3"<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<"             ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |"<<endl;
                    cout<<"    "<<a[3]<<"   |   "<<a[4]<<"   |   "<<a[5]<<"                   "<<"4"<<"   |   "<<"5"<<"   |   "<<"6"<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<"             ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |"<<endl;
                    cout<<"    "<<a[6]<<"   |   "<<a[7]<<"   |   "<<a[8]<<"                   "<<"7"<<"   |   "<<"8"<<"   |   "<<"9"<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |\n"<<endl;
                    if(c%2==0)
                    {
                        cout<<" "<<igrac1<<setfill(' ')<<setw(23-n)<<" na potezu!"<<endl;
                        i=getch();
                        if(a[i-49]==' ')
                            {
                                a[i-49]='X';
                                c++;
                            }
                    }
                    else
                    {
                        if(a[0]=='O' && a[3]=='O' && a[6]==' ' && c%2!=0)
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[0]=='O' && a[6]=='O' && a[3]==' ' && c%2!=0)
                        {
                            a[3]='O';
                            c++;
                        }
                        else if(a[3]=='O' && a[6]=='O' && a[0]==' ' && c%2!=0)
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[1]=='O' && a[4]=='O' && a[7]==' ' && c%2!=0)
                        {
                            a[7]='O';
                            c++;
                        }
                        else if(a[1]=='O' && a[7]=='O' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='O' && a[7]=='O' && a[1]==' ' && c%2!=0)
                        {
                            a[1]='O';
                            c++;
                        }
                        else if(a[2]=='O' && a[5]=='O' && a[8]==' ' && c%2!=0)
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[2]=='O' && a[8]=='O' && a[5]==' ' && c%2!=0)
                        {
                            a[5]='O';
                            c++;
                        }
                        else if(a[5]=='O' && a[8]=='O' && a[2]==' ' && c%2!=0)
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[0]=='O' && a[1]=='O' && a[2]==' ' && c%2!=0)
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[1]=='O' && a[2]=='O' && a[0]==' ' && c%2!=0)
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[2]=='O' && a[0]=='O' && a[1]==' ' && c%2!=0)
                        {
                            a[1]='O';
                            c++;
                        }
                        else if(a[3]=='O' && a[4]=='O' && a[5]==' ' && c%2!=0)
                        {
                            a[5]='O';
                            c++;
                        }
                        else if(a[4]=='O' && a[5]=='O' && a[3]==' ' && c%2!=0)
                        {
                            a[3]='O';
                            c++;
                        }
                        else if(a[3]=='O' && a[5]=='O' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[6]=='O' && a[7]=='O' && a[8]==' ' && c%2!=0)
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[7]=='O' && a[8]=='O' && a[6]==' ' && c%2!=0)
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[6]=='O' && a[8]=='O' && a[7]==' ' && c%2!=0)
                        {
                            a[7]='O';
                            c++;
                        }
                        else if(a[0]=='O' && a[4]=='O' && a[8]==' ' && c%2!=0)
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[0]=='O' && a[8]=='O' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='O' && a[8]=='O' && a[0]==' ' && c%2!=0)
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[2]=='O' && a[4]=='O' && a[6]==' ' && c%2!=0)
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[2]=='O' && a[6]=='O' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='O' && a[6]=='O' && a[2]==' ' && c%2!=0)
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[0]=='O' && a[6]=='O' && a[3]==' ' && c%2!=0)
                        {
                            a[3]='O';
                            c++;
                        }
                        else if(a[0]=='X' && a[3]=='X' && a[6]==' ' && c%2!=0)
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[0]=='X' && a[6]=='X' && a[3]==' ' && c%2!=0)
                        {
                            a[3]='O';
                            c++;
                        }
                        else if(a[3]=='X' && a[6]=='X' && a[0]==' ' && c%2!=0)
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[1]=='X' && a[4]=='X' && a[7]==' ' && c%2!=0)
                        {
                            a[7]='O';
                            c++;
                        }
                        else if(a[1]=='X' && a[7]=='X' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[7]=='X' && a[1]==' ' && c%2!=0)
                        {
                            a[1]='O';
                            c++;
                        }
                        else if(a[2]=='X' && a[5]=='X' && a[8]==' ' && c%2!=0)
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[2]=='X' && a[8]=='X' && a[5]==' ' && c%2!=0)
                        {
                            a[5]='O';
                            c++;
                        }
                        else if(a[5]=='X' && a[8]=='X' && a[2]==' ' && c%2!=0)
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[0]=='X' && a[1]=='X' && a[2]==' ' && c%2!=0)
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[1]=='X' && a[2]=='X' && a[0]==' ' && c%2!=0)
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[2]=='X' && a[0]=='X' && a[1]==' ' && c%2!=0)
                        {
                            a[1]='O';
                            c++;
                        }
                        else if(a[3]=='X' && a[4]=='X' && a[5]==' ' && c%2!=0)
                        {
                            a[5]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[5]=='X' && a[3]==' ' && c%2!=0)
                        {
                            a[3]='O';
                            c++;
                        }
                        else if(a[3]=='X' && a[5]=='X' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[6]=='X' && a[7]=='X' && a[8]==' ' && c%2!=0)
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[7]=='X' && a[8]=='X' && a[6]==' ' && c%2!=0)
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[6]=='X' && a[8]=='X' && a[7]==' ' && c%2!=0)
                        {
                            a[7]='O';
                            c++;
                        }
                        else if(a[0]=='X' && a[4]=='X' && a[8]==' ' && c%2!=0)
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[0]=='X' && a[8]=='X' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[8]=='X' && a[0]==' ' && c%2!=0)
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[2]=='X' && a[4]=='X' && a[6]==' ' && c%2!=0)
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[2]=='X' && a[6]=='X' && a[4]==' ' && c%2!=0)
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[6]=='X' && a[2]==' ' && c%2!=0)
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[0]=='X' && a[6]=='X' && a[3]==' ' && c%2!=0)
                        {
                            a[3]='O';
                            c++;
                        }
                        else if(a[4]==' ')
                        {
                            a[4]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[8]==' ')
                        {
                            a[8]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[0]==' ')
                        {
                            a[0]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[2]==' ')
                        {
                            a[2]='O';
                            c++;
                        }
                        else if(a[4]=='X' && a[6]==' ')
                        {
                            a[6]='O';
                            c++;
                        }
                        else if(a[4]==' ')
                        {
                            a[7]='O';
                            c++;
                        }
                        else
                        {
                            do
                                rd=rand() % 9;
                            while(a[rd]!=' ');
                            a[rd]='O';
                            c++;
                        }}
                        if(a[0]=='X' && a[3]=='X' && a[6]=='X' ||
                        a[1]=='X' && a[4]=='X' && a[7]=='X' ||
                        a[2]=='X' && a[5]=='X' && a[8]=='X' ||
                        a[0]=='X' && a[1]=='X' && a[2]=='X' ||
                        a[3]=='X' && a[4]=='X' && a[5]=='X' ||
                        a[6]=='X' && a[7]=='X' && a[8]=='X' ||
                        a[0]=='X' && a[4]=='X' && a[8]=='X' ||
                        a[2]=='X' && a[4]=='X' && a[6]=='X')
                        {
                            b=1;
                            x++;
                            break;
                        }
                        if(a[0]=='O' && a[3]=='O' && a[6]=='O' ||
                        a[1]=='O' && a[4]=='O' && a[7]=='O' ||
                        a[2]=='O' && a[5]=='O' && a[8]=='O' ||
                        a[0]=='O' && a[1]=='O' && a[2]=='O' ||
                        a[3]=='O' && a[4]=='O' && a[5]=='O' ||
                        a[6]=='O' && a[7]=='O' && a[8]=='O' ||
                        a[0]=='O' && a[4]=='O' && a[8]=='O' ||
                        a[2]=='O' && a[4]=='O' && a[6]=='O')
                        {
                            b=2;
                            y++;
                            break;
                        }
                    }
                    i=0;
                    system("cls");
                    cout<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    cout<<"    "<<a[0]<<"   |   "<<a[1]<<"   |   "<<a[2]<<"       "<<x<<" - "<<y<<"       "<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    cout<<"    "<<a[3]<<"   |   "<<a[4]<<"   |   "<<a[5]<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    cout<<"    "<<a[6]<<"   |   "<<a[7]<<"   |   "<<a[8]<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    if(b==0)
                        cout<<"\n Nerijeseno!";
                    if(b==1)
                        cout<<"\n "<<igrac1;
                    if(b==2)
                        cout<<"\n C++";
                    if(b!=0)
                        cout<<", cestitamo "<<sm;
                    cout<<"\n\n Igrati dalje: 1. Da\n               2. Ne"<<endl;
                    do
                        odab=getch();
                    while(odab!='1' && odab!='2');
                    if(odab=='2')
                        break;
            }
        }
        if(i=='2')
        {
            x=0,y=0,z=0;
            system("cls");
            cout<<"\n1. Igrac: ";cin>>igrac1;n=igrac1.length();
            cout<<"2. Igrac: ";cin>>igrac2;m=igrac2.length();
            if(igrac1[0]>90)
                igrac1[0]-=32;
            if(igrac2[0]>90)
                igrac2[0]-=32;
            while(1>0)
            {
                a="         ";
                b=0;c=0;
                while(c<9)
                {
                    system("cls");
                    cout<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |"<<endl;
                    cout<<"    "<<a[0]<<"   |   "<<a[1]<<"   |   "<<a[2]<<"       "<<x<<" - "<<y<<"       "<<"1"<<"   |   "<<"2"<<"   |   "<<"3"<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<"             ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |"<<endl;
                    cout<<"    "<<a[3]<<"   |   "<<a[4]<<"   |   "<<a[5]<<"                   "<<"4"<<"   |   "<<"5"<<"   |   "<<"6"<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<"             ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |"<<endl;
                    cout<<"    "<<a[6]<<"   |   "<<a[7]<<"   |   "<<a[8]<<"                   "<<"7"<<"   |   "<<"8"<<"   |   "<<"9"<<endl;
                    cout<<"    "<<   "    |       |"<<"                       "<<   "    |       |\n"<<endl;
                    if((c-z)%2==0)
                    {
                        cout<<" "<<igrac1<<setfill(' ')<<setw(23-n)<<" na potezu!"<<endl;
                        i=getch();
                        if(a[i-49]==' ')
                            {
                                a[i-49]='X';
                                c++;
                            }
                    }
                    else
                    {
                        cout<<" "<<igrac2<<setfill(' ')<<setw(23-m)<<" na potezu!"<<endl;
                        i=getch();
                        if(a[i-49]==' ')
                            {
                                a[i-49]='O';
                                c++;
                            }
                    }
                        if(a[0]=='X' && a[3]=='X' && a[6]=='X' ||
                        a[1]=='X' && a[4]=='X' && a[7]=='X' ||
                        a[2]=='X' && a[5]=='X' && a[8]=='X' ||
                        a[0]=='X' && a[1]=='X' && a[2]=='X' ||
                        a[3]=='X' && a[4]=='X' && a[5]=='X' ||
                        a[6]=='X' && a[7]=='X' && a[8]=='X' ||
                        a[0]=='X' && a[4]=='X' && a[8]=='X' ||
                        a[2]=='X' && a[4]=='X' && a[6]=='X')
                        {
                            b=1;
                            x++;
                            break;
                        }
                        if(a[0]=='O' && a[3]=='O' && a[6]=='O' ||
                        a[1]=='O' && a[4]=='O' && a[7]=='O' ||
                        a[2]=='O' && a[5]=='O' && a[8]=='O' ||
                        a[0]=='O' && a[1]=='O' && a[2]=='O' ||
                        a[3]=='O' && a[4]=='O' && a[5]=='O' ||
                        a[6]=='O' && a[7]=='O' && a[8]=='O' ||
                        a[0]=='O' && a[4]=='O' && a[8]=='O' ||
                        a[2]=='O' && a[4]=='O' && a[6]=='O')
                        {
                            b=2;
                            y++;
                            break;
                        }
                    }
                    system("cls");
                    cout<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    cout<<"    "<<a[0]<<"   |   "<<a[1]<<"   |   "<<a[2]<<"       "<<x<<" - "<<y<<"       "<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    cout<<"    "<<a[3]<<"   |   "<<a[4]<<"   |   "<<a[5]<<endl;
                    cout<<" ___"<<   "____|_______|_______"<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    cout<<"    "<<a[6]<<"   |   "<<a[7]<<"   |   "<<a[8]<<endl;
                    cout<<"    "<<   "    |       |"<<endl;
                    z++;
                    if(b==0)
                        cout<<"\n Nerijeseno!";
                    if(b==1)
                        cout<<"\n "<<igrac1;
                    if(b==2)
                        cout<<"\n "<<igrac2;
                    if(b!=0)
                        cout<<", cestitamo "<<sm;
                    cout<<"\n\n Igrati dalje: 1. Da\n               2. Ne"<<endl;
                    do
                        i=getch();
                    while(i!='1' && i!='2');
                    if(i=='2')
                        break;
                }
        }
        if(i=='3')
            return 0;
    }
}
